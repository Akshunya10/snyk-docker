
name: Push Docker Image to JFrog

on:
  workflow_dispatch:

jobs:
  pushToJFrog:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up JFrog CLI
        uses: jfrog/setup-jfrog-cli@v3
        with:
          jfrog-cli-version: 'latest'
          
      - name: Build and Push Docker Image
        env:
         IMAGE_TAG: ${{ github.sha }}
         JFROG_REGISTRY: 13.231.139.12:8081
         REPO: docker-repos
         IMAGE_NAME: dock-img
         uses: docker/build-push-action@v2
         with:
           push: true
           tags: <your artifactory>.jfrog.io/<your image name>:latest
         run: |
          docker build -t fro-img:${IMAGE_TAG} .
          jf rt u "target/lenovo.war" "http://13.231.139.12:8081/artifactory/docker-repo/"
